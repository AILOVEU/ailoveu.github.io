jQuery(document).ready(function(f){"use strict";function e(){if(-1!=window.location.pathname.indexOf("archive")){var a="",o="";f("#layout-archive-year  ul li").each(function(e){var t=f(this).find("em").attr("year");(t<a||""==a)&&(a=t,""==o&&(o=t),f(this).before("<h3 class = '"+a+"'>"+a+"&nbsp;&nbsp;<i class='icon-"+function(e){var t="rat";switch(e%12){case 0:t="monkey";break;case 1:t="rooster";break;case 2:t="dog";break;case 3:t="pig";break;case 4:t="rat";break;case 5:t="ox";break;case 6:t="tiger";break;case 7:t="rabbit";break;case 8:t="dragon";break;case 9:t="snake";break;case 10:t="horse";break;case 11:t="goat"}return t}(t)+"'></i><em>("+f("[year = '"+a+"']").length+"篇)</em></h3>")),f(this).attr("year",a)}),f("#layout-archive-year h3").each(function(){f("#layout-archive-year ul li[year = '"+f(this).attr("class")+"'").wrapAll("<div year = '"+f(this).attr("class")+"'></div>"),f("h3."+f(this).attr("class")).click(function(){f(this).toggleClass("title-bg").next().slideToggle(300)})}),f("#layout-archive-year ul div[year!= '"+o+"']").hide(),f("h3."+o).addClass("title-bg")}}var n,i,r,s,l,c,d,h,t,a,o,u,g,p,m,v,y,b,C,k,T,w,G,I,x,H,E,S,A,O,M,P,_,B={scrollLimitG:50,scrollSpeedG:500,delayTimeG:500,headerH:f("header").outerHeight(),postContentH:f("#article-content").outerHeight(),mainH:f("main").outerHeight(),investmentContainerH:f(".investment-container").outerHeight(),postPageId:".layout-post",postCoverId:"#current-post-cover",postTocId:"#catelog-list",paginationId:"#pagination a",paginationContainer:"#layout-cart, #layout-pure",loadAnimation:'<div class = "transition"><div class = "three-bounce1"> </div> <div class = "three-bounce2"> </div> <div class = "three-bounce3"> </div> </div> '};function F(e){var t=location.href,a=!1,o=B.paginationContainer,n=e+" #global-nav a";f(n).each(function(){var e=f(this).attr("class");e=e.substr(10),-1<t.indexOf(e)&&" "!=f(this).attr("href")?(f(this).parent("li").addClass("active"),a=!0):f(this).removeClass("active")}),!a&&f(o).length&&f(n).eq(0).addClass("active")}function N(e){f(".nav-container").toggleClass("is-visible",e)}function q(e,t,a){f(e).click(function(){return f("html, body").animate({scrollTop:t},a),!1})}(function(){var e,t=CONFIG_BGIMAGE.mode,a=" ",o=CONFIG_BGIMAGE.randomYouMax,n=CONFIG_BGIMAGE.normalSrc,i=CONFIG_BGIMAGE.randomYouSrc,r=CONFIG_BGIMAGE.randomOtherSrc,s=B.postPageId,l=B.postCoverId;switch(f(s).length&&f(l).length&&(t="post"),t){case"random_you":a=i+Math.floor(Math.random()*(o-1)+1)+".jpg";break;case"random_other":a=r;break;case"normal":a=n;break;case"post":a=f(l).attr("data-scr");break;default:a="https://api.berryapi.net/?service=App.Bing.Images&day=-0"}e="url("+a+")",f("header").css("background-image",e);var c={delayTime:B.delayTimeG,scrollSpeed:B.scrollSpeedG||"normal",removePreloaderMask:function(){f("#preloader").length&&f("#preloader").delay(this.delayTime).fadeOut("slow")},removeHtmlHidden:function(){f("html").removeClass("html-loading")},Scroll:function(e){var t=this.scrollSpeed;f(s).length||(t="normal"),f("html, body").delay(this.delayTime/2).animate({scrollTop:e},t,"linear")},setCookie:function(e,t){document.cookie=e+"="+escape(t)+";"},getCookie:function(e){for(var t=document.cookie.split("; "),a=0;a<t.length;a++){var o=t[a].split("=");if(e==o[0])return unescape(o[1])}return 0},browserRefresh:function(){return 1==window.performance.navigation.type}},d=0,h=0,u=c.browserRefresh();function g(){u?(d=h||c.getCookie("currentScrollTop"),console.info("This page is reloaded")):d=B.headerH+2,c.Scroll(d)}function p(){c.removePreloaderMask(),c.removeHtmlHidden(),f(s).length?g():u&&(d=h||c.getCookie("currentScrollTop"),c.Scroll(d),console.info("This page is reloaded"))}if(f(window).scroll(function(){h=f(document).scrollTop(),c.setCookie("currentScrollTop",h)}).trigger("scroll"),CONFIG_BGIMAGE.preloaderEnable&&null!=CONFIG_BGIMAGE.preloaderEnable){var m=setTimeout(function(){return c.removePreloaderMask(),c.removeHtmlHidden(),g(),void console.log("timeout")},4*B.delayTimeG);f("header").imagesLoaded({background:!0},function(){m&&(clearTimeout(m),p())})}else p()})(),f(".nav-trigger").on("click",function(e){f("body").addClass("body-fixed-nav"),e.preventDefault(),N(!0)}),f(".nav-close").on("click",function(e){e.preventDefault(),N(!1),f("body").removeClass("body-fixed-nav")}),F("#navigation-show"),F(".nav-container"),i=f(n="#navigation-hide").outerHeight(),r=f(".article-title").outerHeight(),s=f(".article-meta").outerHeight(),l=B.postContentH,c=B.headerH,d=B.postPageId,h=B.scrollLimitG,f(window).scroll(function(){var e=f(document).scrollTop(),t=f(document).height(),a=f(window).height(),o=0;(100<(o=(o=f(d).length?(e-c)/(l+r+s+80-a)*100:e/(t-a)*100).toFixed(1))||o<0)&&(o=100),f("#progress-percentage span").text(o+"%"),f("#progress-bar").attr("style","width:"+o+"%; display: block;"),(c<h?h:c)<=e?(f(n).css({top:"0"}).show(),f(".nav-trigger").show()):(f(n).css({top:"-"+i+"px"}).hide(),f(".nav-trigger").hide()),f(".nav-trigger").show(),f("#navigation-hide p").show(),c+300<=e?f("#navigation-hide p").show():f("#navigation-hide p").hide()}).trigger("scroll"),a=B.headerH,o=B.mainH-B.investmentContainerH,u=".switch-button",g=B.delayTimeG,p=B.postTocId,f(m=B.postPageId).length&&f(window).scroll(function(){var e=f(document).scrollTop();a<=e&&e<o?f(p).css("position","fixed").show().fadeIn(g):f(p).hide().fadeOut(g)}),f(p).length&&new katelog({contentEl:"article-content",catelogEl:"catelog-list",linkClass:"k-catelog-link",linkActiveClass:"k-catelog-link-active",selector:["h1","h2","h3","h4","h5","h6"],supplyTop:20,active:function(){}}),f(m).length&&f(p).length?(f(u).show(),t=1,f(u).on("click",function(){f(this).toggleClass("toc-switch-button-active"),t=1==t?(f("main").toggleClass("inline-flex"),setTimeout(function(){f("#layout-toc").toggleClass("show").fadeToggle()},g/2),2):(f("#layout-toc").toggleClass("show").fadeToggle(),setTimeout(function(){f("main").toggleClass("inline-flex")},g/2),1)})):f(u).hide(),v=B.scrollSpeedG,y=B.scrollLimitG,b=B.delayTimeG,C=f("#totop"),k=f("#totop-post-page"),T=f("#read-more"),C.hide(),f(window).scroll(function(){var e=f(document).scrollTop();y<e?f(C).stop().fadeTo(b,1):f(C).stop().fadeTo(b,0)}),q(C,0,v),q(k,0,v),q(T,f("main").offset().top+2,v),e(),w=B.paginationId,G=B.loadAnimation,I=B.delayTimeG,x=B.paginationContainer,H=CONFIG_LEACLOUD_COUNT.enable||!1,E=f(w).attr("data-title"),S=f(w).attr("data-status"),f("body").on("click",w,function(){var o=f(this).attr("href");return f(w).text(" ").append(G),f.ajax({type:"get",url:o,async:!0,timeout:20*I,error:function(e,t,a){f(w).attr("href",o).empty().text(E),alert("Error requesting "+a.url+":  "+t.status+",  "+t.statusText),console.log("Error requesting "+a.url+":  "+t.status+",  "+t.statusText)},success:function(e){var t=f(e).find("#post"),a=f(e).find(w).attr("href");f(x).append(t.fadeIn(I).addClass("animation-zoom")),H&&annieShowData(initCounter,initPost),f(w).empty().text(E),null!=a?f(w).attr("href",a):f("#pagination").html("<span>"+S+"</span>")},complete:function(){}}),!1}),A=".investment-title-1",O="on",f(M=".investment-content").each(function(){f(this).children().eq(0).show()}),f(A).each(function(){f(this).children().eq(0).addClass(O)}),f(A).children().click(function(){f(this).addClass(O).siblings().removeClass(O);var e=f(A).children().index(this);f(M).children().eq(e).show().siblings().hide()}),P=B.loadAnimation,_=B.delayTimeG,f(".tags a, .category a").click(function(){f("#TCP-title").text("查询结果"),f("#TCP-content").text("").append(P);var e=f(this).attr("href");return null!=e&&f.ajax({url:e,type:"get",async:!0,timeout:20*_,error:function(e,t,a){alert("Error requesting "+a.url+": "+t.status+","+t.statusText),console.log("Error requesting "+a.url+": "+t.status+","+t.statusText)},success:function(e){f("#TCP-content").empty();var t=f(e).find(".layout-archive");f("#TCP-content").append(t.fadeIn(_).addClass("animation-zoom")),f(".layout-archive").css({paddingTop:"0"}),f(".layout-archive i").css({marginTop:"5px",marginBottom:"30px"})},complete:function(){}}),!1}),zh_init(),yall({observeChanges:!0})}),console.log("%c Github %c","background: #222222; color: #ffffff"," ","https://github.com/Sariay/hexo-theme-Annie");
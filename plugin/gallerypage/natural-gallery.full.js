var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"==("undefined"==typeof module?"undefined":_typeof(module))?module.exports=t():"function"==typeof define&&define.amd?define("NaturalGallery",[],t):"object"==("undefined"==typeof exports?"undefined":_typeof(exports))?exports.NaturalGallery=t():e.NaturalGallery=t()}(void 0,function(){var n,i,zn=Math.round,Nn=Math.max,p=Math.floor;return i={},o.m=n=[function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.getIcon=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");return t.setAttribute("viewBox","0 0 100 100"),t.innerHTML='<use xlink:href="#'+e+'"></use>',t},e.toggleClass=function(e,t){e&&t&&(this.hasClass(e,t)?this.removeClass(e,t):this.addClass(e,t))},e.removeClass=function(e,t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},e.addClass=function(e,t){this.hasClass(t)||(e.className+=(e.className?" ":"")+t)},e.hasClass=function(e,t){return e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},e.uniqBy=function(e,n){var i=[];return e.forEach(function(t){i.some(function(e){return t[n]===e[n]})||i.push(t)}),i},e.differenceBy=function(e,n,i){var o=[];return e.forEach(function(t){n.some(function(e){return t[i]===e[i]})||o.push(t)}),o},e.intersectionBy=function(e,n,i){var o=[];return e.forEach(function(t){n.some(function(e){return t[i]===e[i]})&&o.push(t)}),o};var n=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}];e.removeDiacritics=function(e){for(var t=0;t<n.length;t++)e=e.replace(n[t].letters,n[t].base);return e}}(t.Utility||(t.Utility={}))},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(i.prototype.isActive=function(){return null!==this.collection},Object.defineProperty(i.prototype,"collection",{get:function(){return this._collection},set:function(e){this._collection=e},enumerable:!0,configurable:!0}),i);function i(e){this.header=e,this._collection=null}t.AbstractFilter=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(3),n(4);var i=n(5);t.Gallery=i.Gallery},function(){},function(){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),r=n(9),u=n(10),l=n(11),s=n(0),o=n(13),a=(c.prototype.render=function(){var n=this;this.noResults=document.createElement("div"),s.Utility.addClass(this.noResults,"natural-gallery-noresults"),this.noResults.appendChild(s.Utility.getIcon("icon-noresults")),this.noResults.style.display="block",this.nextButton=document.createElement("div"),s.Utility.addClass(this.nextButton,"natural-gallery-next"),this.nextButton.appendChild(s.Utility.getIcon("icon-next")),this.nextButton.style.display="none",this.nextButton.addEventListener("click",function(e){e.preventDefault();var t=n.getRowsPerPage();n.addElements(t),n.pagination(t)});var e=document.createElement("iframe");this.rootElement.appendChild(e);var t=null;e.contentWindow.addEventListener("resize",function(){clearTimeout(t),t=setTimeout(function(){n.resize()},100)}),this.bodyElement=document.createElement("div"),s.Utility.addClass(this.bodyElement,"natural-gallery-body"),this.bodyElement.appendChild(this.noResults),this.header&&this.rootElement.appendChild(this.header.render()),this.rootElement.appendChild(this.bodyElement),this.rootElement.appendChild(this.nextButton)},c.prototype.addItems=function(e){if(e.constructor===Array&&e.length){var t=0===this.collection.length||this.collection.length===this.pswpContainer.length;e.forEach(function(e){this._collection.push(new i.Item(e,this))},this),o.Organizer.organize(this),this.header&&this.header.refresh(),t&&this.addElements(this.getRowsPerPage())}},c.prototype.style=function(){this.collection.forEach(function(e){e.style()})},c.prototype.addElements=function(e){void 0===e&&(e=null);var t=this.collection;if(this.nextButton.style.display="block",this.pswpContainer.length===t.length)return this.nextButton.style.display="none",void(0===t.length&&(this.noResults.style.display="block",this.rootElement.getElementsByClassName("natural-gallery-images")[0].style.display="none"));for(var n,i=this.pswpContainer.length,o=this.pswpContainer.length?t[i].row+e:e,r=i;r<t.length;r++)(n=t[r]).row<o&&(this.pswpContainer.push(n.getPswpItem()),this.bodyElement.appendChild(n.loadElement()),n.bindClick(),n.flash()),this.pswpContainer.length===t.length&&(this.nextButton.style.display="none");this.noResults.style.display="none";var u=this.rootElement.getElementsByClassName("natural-gallery-images")[0];u&&(u.style.display="block");var l=this.rootElement.getElementsByClassName("natural-gallery-visible")[0];l&&(l.textContent=this.pswpContainer.length+"");var s=this.rootElement.getElementsByClassName("natural-gallery-total")[0];s&&(s.textContent=t.length+"")},c.prototype.getRowsPerPage=function(){if(this.options.limit)return this.options.limit;var e=(this.scrollElement?this.scrollElement.clientHeight:document.documentElement.clientHeight)-this.bodyElement.offsetTop,t=p(e/(.55*this.options.rowHeight));return t<this.options.minRowsAtStart?this.options.minRowsAtStart:t},c.prototype.resize=function(){var e=p(this.bodyElement.getBoundingClientRect().width);if(e!==this.bodyWidth){this.bodyWidth=e,o.Organizer.organize(this);var t=this.collection[this.pswpContainer.length-1],n=t?t.row+1:this.getRowsPerPage();this.reset(),this.addElements(n)}},c.prototype.refresh=function(){this.reset(),o.Organizer.organize(this),this.addElements(this.getRowsPerPage())},c.prototype.reset=function(){this.pswpContainer=[],this._collection.forEach(function(e){e.remove()}),this.noResults.style.display="block"},c.prototype.bindScroll=function(e){var o,r=this;o=e instanceof Document?e.documentElement:e,e.addEventListener("scroll",function(){var e=r.rootElement.offsetTop+r.rootElement.offsetHeight+r.options.infiniteScrollOffset,t=o.scrollTop-(o.clientTop||0),n=o.clientHeight,i=t-r.old_scroll_top;r.old_scroll_top=t,0<i&&e<=t+n&&(r.addElements(1),r.pagination(1))})},c.prototype.pagination=function(e){if(void 0===e&&(e=1),this.events.pagination)if(this.collection.length){var t=this.getMaxImagesPerRow();this._events.pagination(this.collection.length,t*e)}else{var n=o.Organizer.simulatePagination(this);this._events.pagination(this.collection.length,n*this.getRowsPerPage()*2)}},c.prototype.getMaxImagesPerRow=function(){return Nn.apply(null,this.collection.reduce(function(e,t){return e[t.row]=-1<e[t.row]?e[t.row]+1:1,e},[]))},c.prototype.select=function(e){-1===this._selected.indexOf(e)&&(this._selected.push(e),this._events.select(this._selected.map(function(e){return e.fields})))},c.prototype.unselect=function(e){var t=this._selected.indexOf(e);-1<t&&(this._selected.splice(t,1),this._events.select(this._selected.map(function(e){return e.fields})))},c.prototype.unselectAll=function(){for(var e=this._selected.length-1;0<=e;e--)this._selected[e].toggleSelect();this._selected=[]},Object.defineProperty(c.prototype,"events",{get:function(){return this._events},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"pswpContainer",{get:function(){return this._pswpContainer},set:function(e){this._pswpContainer=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"collection",{get:function(){return this.header&&this.header.isFiltered()?this.header.collection:this._collection},set:function(e){this.reset(),this._collection=[],this.addItems(e)},enumerable:!0,configurable:!0}),c.prototype.getOriginalCollection=function(){return this._collection},Object.defineProperty(c.prototype,"bodyWidth",{get:function(){return this._bodyWidth},set:function(e){this._bodyWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"bodyElement",{get:function(){return this._bodyElement},set:function(e){this._bodyElement=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"rootElement",{get:function(){return this._rootElement},set:function(e){this._rootElement=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"pswpApi",{get:function(){return this._pswpApi},set:function(e){this._pswpApi=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"pswpElement",{get:function(){return this._pswpElement},set:function(e){this._pswpElement=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"options",{get:function(){return this._options},set:function(e){this._options=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"header",{get:function(){return this._header},set:function(e){this._header=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"categories",{get:function(){return this._categories},set:function(e){this._categories=e},enumerable:!0,configurable:!0}),c);function c(e,t,n,i){for(var o in void 0===i&&(i=null),this.scrollElement=i,this._options={rowHeight:350,format:"natural",round:3,margin:3,limit:0,showLabels:"hover",lightbox:!0,minRowsAtStart:2,showCount:!1,searchFilter:!1,categoriesFilter:!1,showNone:!1,showOthers:!1,labelCategories:"Category",labelNone:"None",labelOthers:"Others",labelSearch:"Search",labelImages:"Images",selectable:!1,zoomRotation:!0,infiniteScrollOffset:0},this._events={},this.old_scroll_top=0,this._pswpContainer=[],this._collection=[],this._categories=[],this._selected=[],this.defaultImageRatio=.7,this.pswpElement=t,this.options)void 0===n.options[o]&&(n.options[o]=this.options[o]);this.options=n.options,this.categories=n.categories?n.categories:[],this.rootElement=e,s.Utility.addClass(this.rootElement,"natural-gallery"),this._events=n.events?n.events:{},this._events.select&&(this.options.selectable=!0),(this.options.searchFilter||this.options.categoriesFilter||this.options.showCount)&&(this.header=new r.Header(this),this.options.searchFilter&&this.header.addFilter(new u.SearchFilter(this.header)),this.options.categoriesFilter&&this.header.addFilter(new l.CategoryFilter(this.header))),this.render(),this.bodyWidth=p(this.bodyElement.getBoundingClientRect().width),n.images?this.collection=n.images:this.pagination(),0===this.options.limit&&this.bindScroll(null===i?document:i)}t.Gallery=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),u=n(7),l=n(8),i=(o.prototype.getTitle=function(e){return e.title?this.getTitleDetails(e.title).title:null},o.prototype.getLink=function(e){return e.link?e.link:this.getTitleDetails(e.title).link},o.prototype.getLinkTarget=function(e){return e.linkTarget?e.linkTarget:this.getTitleDetails(e.title).linkTarget},o.prototype.getTitleDetails=function(e){var t=document.createElement("div");t.innerHTML=e;var n=t.getElementsByTagName("a"),i={title:t.textContent,link:null,linkTarget:null};return n[0]&&(i.link=n[0].getAttribute("href"),i.linkTarget=n[0].getAttribute("target")),i},o.prototype.createElement=function(){var t=this,e=this.gallery.options,n=null;this.title&&-1<["true","hover"].indexOf(e.showLabels)&&(n=!0);var i=document.createElement("div"),o=document.createElement("div"),r=this.getLinkElement(),u=null;if(e.lightbox&&n&&r?(n=r,a.Utility.addClass(n,"button"),u=o):e.lightbox&&n&&!r?(n=document.createElement("div"),u=i):e.lightbox&&!n?u=i:!e.lightbox&&n&&r?(i=r,(n=document.createElement("div")).classList.add("button")):e.lightbox||!n||r?e.lightbox||n||!r||(i=r):n=document.createElement("div"),u&&(a.Utility.addClass(u,"zoomable"),e.zoomRotation&&a.Utility.addClass(u,"rotation")),a.Utility.addClass(o,"image"),a.Utility.addClass(i,"figure loading visible"),o.style.backgroundImage="url("+this.thumbnail+")",i.appendChild(o),e.round){var l=e.round+"px";i.style.borderRadius=l,o.style.borderRadius=l}if(this.element=i,this.image=o,n&&(n.textContent=this.title,a.Utility.addClass(n,"title"),"hover"===e.showLabels&&a.Utility.addClass(n,"hover"),i.appendChild(n)),this.gallery.options.selectable){this.selectBtn=document.createElement("div");var s=a.Utility.getIcon("icon-select");this.selectBtn.appendChild(s),this.selectBtn.classList.add("selectBtn"),s.addEventListener("click",function(e){e.stopPropagation(),t.toggleSelect()}),this.element.appendChild(this.selectBtn)}},o.prototype.toggleSelect=function(){this.selected=!this.selected,this.selected?(this.element.classList.add("selected"),this.gallery.select(this)):(this.element.classList.remove("selected"),this.gallery.unselect(this))},o.prototype.getLinkElement=function(){var t=this,e=null;return this.link&&(e=document.createElement("a"),this.gallery.events.link?e.addEventListener("click",function(e){t.gallery.events.link.preventDefault&&e.preventDefault(),t.gallery.events.link.callback(t._fields)}):(e.setAttribute("href",this.link),a.Utility.addClass(e,"link"),this.linkTarget&&e.setAttribute("target",this.linkTarget))),e},o.prototype.style=function(){a.Utility.removeClass(this.element,"visible"),this.element.style.width=this.width+"px",this.element.style.height=this.height+"px",this.element.style.marginRight=this.gallery.options.margin+"px",this.element.style.marginBottom=this.gallery.options.margin+"px",this.last&&(this.element.style.marginRight="0");var e=this;window.setTimeout(function(){a.Utility.addClass(e.element,"visible")},0)},o.prototype.flash=function(){var e=this;a.Utility.removeClass(this.element,"visible"),window.setTimeout(function(){a.Utility.addClass(e.element,"visible")},0)},o.prototype.bindClick=function(){if(this.gallery.options.lightbox){var t=this;this.binded||(this.binded=!0,(this.link?this.image:this.element).addEventListener("click",function(e){t.openPhotoSwipe.call(t,e,t.element)}))}},o.prototype.openPhotoSwipe=function(e,t){e.preventDefault();var n=this;if(this.gallery.options.lightbox){var i=Array.prototype.slice.call(t.parentNode.children).indexOf(t)-1,o=new u(this.gallery.pswpElement,l,this.gallery.pswpContainer,{index:i,bgOpacity:.85,showHideOpacity:!0,loop:!1});(this.gallery.pswpApi=o).init();var r=null;o.listen("beforeChange",function(e){0<e&&o.getCurrentIndex()===o.items.length-1?n.gallery.addElements():e===-1*(o.items.length-1)&&(r=o.items.length,n.gallery.addElements())}),o.listen("afterChange",function(){r&&(o.goTo(r),r=null)})}},o.prototype.getPswpItem=function(){return{src:this._enlarged,w:this._eWidth,h:this._eHeight,title:this._title}},o.prototype.getElement=function(){return this.element},o.prototype.loadElement=function(){var e=this,t=document.createElement("img");return t.setAttribute("src",this.thumbnail),t.addEventListener("load",function(){a.Utility.removeClass(e.element,"loading"),a.Utility.addClass(e.element,"loaded")}),t.addEventListener("error",function(){a.Utility.addClass(e.element,"errored")}),this.element},o.prototype.remove=function(){this.getElement().parentNode&&this.getElement().parentNode.removeChild(this.getElement())},Object.defineProperty(o.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"thumbnail",{get:function(){return this._thumbnail},set:function(e){this._thumbnail=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"enlarged",{get:function(){return this._enlarged},set:function(e){this._enlarged=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"title",{get:function(){return this._title},set:function(e){this._title=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tWidth",{get:function(){return this._tWidth},set:function(e){this._tWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tHeight",{get:function(){return this._tHeight},set:function(e){this._tHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"eWidth",{get:function(){return this._eWidth},set:function(e){this._eWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"eHeight",{get:function(){return this._eHeight},set:function(e){this._eHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"last",{get:function(){return this._last},set:function(e){this._last=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"categories",{get:function(){return this._categories},set:function(e){this._categories=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"row",{get:function(){return this._row},set:function(e){this._row=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"description",{get:function(){return this._description},set:function(e){this._description=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"binded",{get:function(){return this._binded},set:function(e){this._binded=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"link",{get:function(){return this._link},set:function(e){this._link=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"linkTarget",{get:function(){return this._linkTarget},set:function(e){this._linkTarget=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"fields",{get:function(){return this._fields},enumerable:!0,configurable:!0}),o);function o(e,t){this.gallery=t,this._binded=!1,this.selected=!1,this._fields=e,this.id=e.id,this.thumbnail=e.thumbnail,this.enlarged=e.enlarged,this.title=this.getTitle(e),this.link=this.getLink(e),this.linkTarget=this.getLinkTarget(e),this.tWidth=e.tWidth,this.tHeight=e.tHeight,this.eWidth=e.eWidth,this.eHeight=e.eHeight,this.categories=e.categories,this.last=e.last,this.createElement()}t.Item=i},function(e,t,n){var i,o;void 0===(o="function"==typeof(i=function(){"use strict";return function(p,r,t,e){var d=Math.min,h=Math.abs,n=Math.PI,g={features:null,bind:function e(t,n,i,o){var r=(o?"remove":"add")+"EventListener";n=n.split(" ");for(var u=0;u<n.length;u++){n[u]&&t[r](n[u],i,!1)}},isArray:function e(t){return t instanceof Array},createEl:function e(t,n){var i=document.createElement(n||"div");return t&&(i.className=t),i},getScrollY:function e(){var t=window.pageYOffset;return void 0===t?document.documentElement.scrollTop:t},unbind:function e(t,n,i){g.bind(t,n,i,!0)},removeClass:function e(t,n){var i=new RegExp("(\\s|^)"+n+"(\\s|$)");t.className=t.className.replace(i," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function e(t,n){g.hasClass(t,n)||(t.className+=(t.className?" ":"")+n)},hasClass:function e(t,n){return t.className&&new RegExp("(^|\\s)"+n+"(\\s|$)").test(t.className)},getChildByClass:function e(t,n){for(var i=t.firstChild;i;){if(g.hasClass(i,n))return i;i=i.nextSibling}},arraySearch:function e(t,n,i){for(var o=t.length;o--;){if(t[o][i]===n)return o}return-1},extend:function e(t,n,i){for(var o in n){if(n.hasOwnProperty(o)){if(i&&t.hasOwnProperty(o))continue;t[o]=n[o]}}},easing:{sine:{out:function e(t){return Math.sin(t*(n/2))},inOut:function e(t){return-(Math.cos(n*t)-1)/2}},cubic:{out:function e(t){return--t*t*t+1}}},detectFeatures:function e(){if(g.features)return g.features;var t=g.createEl(),n=t.style,i="",o={};if(o.oldIE=document.all&&!document.addEventListener,o.touch="ontouchstart"in window,window.requestAnimationFrame&&(o.raf=window.requestAnimationFrame,o.caf=window.cancelAnimationFrame),o.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,!o.pointerEvent){var r=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var u=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);u&&0<u.length&&(u=parseInt(u[1],10),1<=u&&8>u&&(o.isOldIOSPhone=!0))}var l=r.match(/Android\s([0-9\.]*)/),s=l?l[1]:0;s=parseFloat(s),1<=s&&(4.4>s&&(o.isOldAndroid=!0),o.androidVersion=s),o.isMobileOpera=/opera mini|opera mobi/i.test(r)}for(var a,c,d=["transform","perspective","animationName"],p=["","webkit","Moz","ms","O"],h=0;4>h;h++){i=p[h];for(var f=0;3>f;f++){a=d[f],c=i+(i?a.charAt(0).toUpperCase()+a.slice(1):a),!o[a]&&c in n&&(o[a]=c)}i&&!o.raf&&(i=i.toLowerCase(),o.raf=window[i+"RequestAnimationFrame"],o.raf&&(o.caf=window[i+"CancelAnimationFrame"]||window[i+"CancelRequestAnimationFrame"]))}if(!o.raf){var m=0;o.raf=function(e){var t=(new Date).getTime(),n=Nn(0,16-(t-m)),i=window.setTimeout(function(){e(t+n)},n);return m=t+n,i},o.caf=function(e){clearTimeout(e)}}return o.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,g.features=o,o}};g.detectFeatures(),g.features.oldIE&&(g.bind=function(e,t,n,i){t=t.split(" ");for(var o,r=(i?"detach":"attach")+"Event",u=function e(){n.handleEvent.call(n)},l=0;l<t.length;l++){if(o=t[l],o)if("object"==(typeof n==="undefined"?"undefined":_typeof(n))&&n.handleEvent){if(!i)n["oldIE"+o]=u;else if(!n["oldIE"+o])return!1;e[r]("on"+o,n["oldIE"+o])}else e[r]("on"+o,n)}});var f=this,i=25,l=3,m={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function e(t){return"A"===t.tagName},getDoubleTapZoom:function e(t,n){return t?1:.7>n.initialZoomLevel?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};g.extend(m,e);var a,u,o,y,s,c,E,v,b,C,w,x,F,A,_,D,I,O,T,B,P,k,S,R,L,U,z,N,M,j,Z,H,W,K,q,G,Y,V,X,$,J,Q,ee,te,ne,ie,oe,re,ue,le,se,ae,ce,de,pe,he,fe,me=function e(){return{x:0,y:0}},ge=me(),ye=me(),Ee=me(),ve={},be=0,Ce={},we=me(),xe=0,Fe=!0,Ae=[],_e={},De=!1,Ie=function e(t,n){g.extend(f,n.publicMethods),Ae.push(t)},Oe=function e(t){var n=nn();if(t>n-1)return t-n;return 0>t?n+t:t},Te={},Be=function e(t,n){return Te[t]||(Te[t]=[]),Te[t].push(n)},Pe=function e(t){var n=Te[t];if(n){var i=Array.prototype.slice.call(arguments);i.shift();for(var o=0;o<n.length;o++){n[o].apply(f,i)}}},ke=function e(){return(new Date).getTime()},Se=function e(t){pe=t,f.bg.style.opacity=t*m.bgOpacity},Re=function e(t,n,i,o,r){(!De||r&&r!==f.currItem)&&(o/=r?r.fitRatio:f.currItem.fitRatio),t[k]=x+n+"px, "+i+"px"+F+" scale("+o+")"},Le=function e(t){le&&(t&&(C>f.currItem.fitRatio?!De&&(mn(f.currItem,!1,!0),De=!0):De&&(mn(f.currItem),De=!1)),Re(le,Ee.x,Ee.y,C))},Ue=function e(t){t.container&&Re(t.container.style,t.initialPosition.x,t.initialPosition.y,t.initialZoomLevel,t)},ze=function e(t,n){n[k]=x+t+"px, 0px"+F},Ne=function e(t,n){if(!m.loop&&n){var i=y+(we.x*be-t)/we.x,o=zn(t-Ct.x);(0>i&&0<o||i>=nn()-1&&0>o)&&(t=Ct.x+o*m.mainScrollEndFriction)}Ct.x=t,ze(t,s)},Me=function e(t,n){var i=wt[t]-Ce[t];return ye[t]+ge[t]+i-i*(n/w)},je=function e(t,n){t.x=n.x,t.y=n.y,n.id&&(t.id=n.id)},Ze=function e(t){t.x=zn(t.x),t.y=zn(t.y)},He=null,We=function e(){He&&(g.unbind(document,"mousemove",e),g.addClass(p,"pswp--has_mouse"),m.mouseUsed=!0,Pe("mouseUsed")),He=setTimeout(function(){He=null},100)},Ke=function e(){g.bind(document,"keydown",f),Z.transform&&g.bind(f.scrollWrap,"click",f),m.mouseUsed||g.bind(document,"mousemove",We),g.bind(window,"resize scroll orientationchange",f),Pe("bindEvents")},qe=function e(){g.unbind(window,"resize scroll orientationchange",f),g.unbind(window,"scroll",b.scroll),g.unbind(document,"keydown",f),g.unbind(document,"mousemove",We),Z.transform&&g.unbind(f.scrollWrap,"click",f),X&&g.unbind(window,E,f),clearTimeout(H),Pe("unbindEvents")},Ge=function e(t,n){var i=dn(f.currItem,ve,t);return n&&(ue=i),i},Ye=function e(t){return t||(t=f.currItem),t.initialZoomLevel},Ve=function e(t){return t||(t=f.currItem),0<t.w?m.maxSpreadZoom:1},Xe=function e(t,n,i,o){return o===f.currItem.initialZoomLevel?(i[t]=f.currItem.initialPosition[t],!0):(i[t]=Me(t,o),i[t]>n.min[t])?(i[t]=n.min[t],!0):!!(i[t]<n.max[t])&&(i[t]=n.max[t],!0)},$e=function e(){if(k){var t=Z.perspective&&!R;return x="translate"+(t?"3d(":"("),void(F=Z.perspective?", 0px)":")")}k="left",g.addClass(p,"pswp--ie"),ze=function e(t,n){n.left=t+"px"},Ue=function e(t){var n=1<t.fitRatio?1:t.fitRatio,i=t.container.style,o=n*t.w,r=n*t.h;i.width=o+"px",i.height=r+"px",i.left=t.initialPosition.x+"px",i.top=t.initialPosition.y+"px"},Le=function e(){if(le){var t=le,n=f.currItem,i=1<n.fitRatio?1:n.fitRatio,o=i*n.w,r=i*n.h;t.width=o+"px",t.height=r+"px",t.left=Ee.x+"px",t.top=Ee.y+"px"}}},Je=function e(t){var n="";m.escKey&&27===t.keyCode?n="close":m.arrowKeys&&(37===t.keyCode?n="prev":39===t.keyCode&&(n="next")),!n||t.ctrlKey||t.altKey||t.shiftKey||t.metaKey||(t.preventDefault?t.preventDefault():t.returnValue=!1,f[n]())},Qe=function e(t){!t||(Q||J||se||Y)&&(t.preventDefault(),t.stopPropagation())},et=function e(){f.setScrollOffset(0,g.getScrollY())},tt={},nt=0,it=function e(t){tt[t]&&(tt[t].raf&&U(tt[t].raf),nt--,delete tt[t])},ot=function e(t){tt[t]&&it(t),tt[t]||(nt++,tt[t]={})},rt=function e(){for(var t in tt){tt.hasOwnProperty(t)&&it(t)}},ut=function e(t,n,i,o,r,u,l){var s,a=ke();ot(t);var c=function e(){if(tt[t]){if(s=ke()-a,s>=o)return it(t),u(i),void(l&&l());u((i-n)*r(s/o)+n),tt[t].raf=L(e)}};c()},lt=30,st=10,at={},ct={},dt={},pt={},ht={},ft=[],mt={},gt=[],yt={},Et=0,vt=me(),bt=0,Ct=me(),wt=me(),xt=me(),Ft=function e(t,n){return t.x===n.x&&t.y===n.y},At=function e(t,n){return h(t.x-n.x)<i&&h(t.y-n.y)<i},_t=function e(t,n){return yt.x=h(t.x-n.x),yt.y=h(t.y-n.y),Math.sqrt(yt.x*yt.x+yt.y*yt.y)},Dt=function e(){ee&&(U(ee),ee=null)},It=function e(){X&&(ee=L(e),Wt())},Ot=function e(){return"fit"!==m.scaleMode||C!==f.currItem.initialZoomLevel},Tt=function e(t,n){return t&&t!==document&&(t.getAttribute("class")&&-1<t.getAttribute("class").indexOf("pswp__scroll-wrap")?!1:n(t)?t:e(t.parentNode,n))},Bt={},Pt=function e(t,n){return Bt.prevent=!Tt(t.target,m.isClickableElement),Pe("preventDragEvent",t,n,Bt),Bt.prevent},kt=function e(t,n){return n.x=t.pageX,n.y=t.pageY,n.id=t.identifier,n},St=function e(t,n,i){i.x=.5*(t.x+n.x),i.y=.5*(t.y+n.y)},Rt=function e(t,n,i){if(50<t-K){var o=2<gt.length?gt.shift():{};o.x=n,o.y=i,gt.push(o),K=t}},Lt=function e(){var t=Ee.y-f.currItem.initialPosition.y;return 1-h(t/(ve.y/2))},Ut={},zt={},Nt=[],Mt=function e(t){for(;0<Nt.length;){Nt.pop()}return S?(fe=0,ft.forEach(function(e){0===fe?Nt[0]=e:1===fe&&(Nt[1]=e),fe++})):-1<t.type.indexOf("touch")?t.touches&&0<t.touches.length&&(Nt[0]=kt(t.touches[0],Ut),1<t.touches.length&&(Nt[1]=kt(t.touches[1],zt))):(Ut.x=t.pageX,Ut.y=t.pageY,Ut.id="",Nt[0]=Ut),Nt},jt=function e(t,n){var i,o,r,u,l=0,s=Ee[t]+n[t],a=0<n[t],c=Ct.x+n.x,d=Ct.x-mt.x;return i=s>ue.min[t]||s<ue.max[t]?m.panEndFriction:1,s=Ee[t]+n[t]*i,(m.allowPanToNext||C===f.currItem.initialZoomLevel)&&(le?"h"===ae&&"x"===t&&!J&&(a?(s>ue.min[t]&&(i=m.panEndFriction,l=ue.min[t]-s,o=ue.min[t]-ye[t]),(0>=o||0>d)&&1<nn()?(u=c,0>d&&c>mt.x&&(u=mt.x)):ue.min.x!==ue.max.x&&(r=s)):(s<ue.max[t]&&(i=m.panEndFriction,l=s-ue.max[t],o=ye[t]-ue.max[t]),(0>=o||0<d)&&1<nn()?(u=c,0<d&&c<mt.x&&(u=mt.x)):ue.min.x!==ue.max.x&&(r=s))):u=c,"x"===t)?(void 0!==u&&(Ne(u,!0),te=u!==mt.x),ue.min.x!==ue.max.x&&(void 0===r?!te&&(Ee.x+=n.x*i):Ee.x=r),void 0!==u):void(!se&&!te&&C>f.currItem.fitRatio&&(Ee[t]+=n[t]*i))},Zt=function e(t){if(!("mousedown"===t.type&&0<t.button)){if(en)return void t.preventDefault();if(!(V&&"mousedown"===t.type)){if(Pt(t,!0)&&t.preventDefault(),Pe("pointerDown"),S){var n=g.arraySearch(ft,t.pointerId,"id");0>n&&(n=ft.length),ft[n]={x:t.pageX,y:t.pageY,id:t.pointerId}}var i=Mt(t),o=i.length;ne=null,rt(),X&&1!==o||(X=ce=!0,g.bind(window,E,f),G=he=de=Y=te=Q=$=J=!1,ae=null,Pe("firstTouchStart",i),je(ye,Ee),ge.x=ge.y=0,je(pt,i[0]),je(ht,pt),mt.x=we.x*be,gt=[{x:pt.x,y:pt.y}],K=W=ke(),Ge(C,!0),Dt(),It()),ie||!(1<o)||se||te||(w=C,J=!1,ie=$=!0,ge.y=ge.x=0,je(ye,Ee),je(at,i[0]),je(ct,i[1]),St(at,ct,xt),wt.x=h(xt.x)-Ee.x,wt.y=h(xt.y)-Ee.y,oe=re=_t(at,ct))}}},Ht=function e(t){if(t.preventDefault(),S){var n=g.arraySearch(ft,t.pointerId,"id");if(-1<n){var i=ft[n];i.x=t.pageX,i.y=t.pageY}}if(X){var o=Mt(t);if(ae||Q||ie)ne=o;else if(Ct.x!==we.x*be)ae="h";else{var r=h(o[0].x-pt.x)-h(o[0].y-pt.y);h(r)>=st&&(ae=0<r?"h":"v",ne=o)}}},Wt=function e(){if(ne){var t=ne.length;if(0!==t)if(je(at,ne[0]),dt.x=at.x-pt.x,dt.y=at.y-pt.y,ie&&1<t){if(pt.x=at.x,pt.y=at.y,!dt.x&&!dt.y&&Ft(ne[1],ct))return;je(ct,ne[1]),J||(J=!0,Pe("zoomGestureStarted"));var n=_t(at,ct),i=Vt(n);i>f.currItem.initialZoomLevel+f.currItem.initialZoomLevel/15&&(he=!0);var o=1,r=Ye(),u=Ve();if(!(i<r))i>u&&(o=(i-u)/(6*r),1<o&&(o=1),i=u+o*r);else if(m.pinchToClose&&!he&&w<=f.currItem.initialZoomLevel){var l=r-i,s=1-l/(r/1.2);Se(s),Pe("onPinchClose",s),de=!0}else o=(r-i)/r,1<o&&(o=1),i=r-o*(r/3);0>o&&(o=0),oe=n,St(at,ct,vt),ge.x+=vt.x-xt.x,ge.y+=vt.y-xt.y,je(xt,vt),Ee.x=Me("x",i),Ee.y=Me("y",i),G=i>C,C=i,Le()}else{if(!ae)return;if(ce&&(ce=!1,h(dt.x)>=st&&(dt.x-=ne[0].x-ht.x),h(dt.y)>=st&&(dt.y-=ne[0].y-ht.y)),pt.x=at.x,pt.y=at.y,0===dt.x&&0===dt.y)return;if("v"===ae&&m.closeOnVerticalDrag&&!Ot()){ge.y+=dt.y,Ee.y+=dt.y;var a=Lt();return Y=!0,Pe("onVerticalDrag",a),Se(a),void Le()}Rt(ke(),at.x,at.y),Q=!0,ue=f.currItem.bounds;var c=jt("x",dt);c||(jt("y",dt),Ze(Ee),Le())}}},Kt=function e(t){if(Z.isOldAndroid){if(V&&"mouseup"===t.type)return;-1<t.type.indexOf("touch")&&(clearTimeout(V),V=setTimeout(function(){V=0},600))}Pe("pointerUp"),Pt(t,!1)&&t.preventDefault();var n;if(S){var i=g.arraySearch(ft,t.pointerId,"id");if(-1<i)if(n=ft.splice(i,1)[0],navigator.pointerEnabled)n.type=t.pointerType||"mouse";else{n.type={2:"touch",3:"pen",4:"mouse"}[t.pointerType],n.type||(n.type=t.pointerType||"mouse")}}var o,r=Mt(t),u=r.length;if("mouseup"===t.type&&(u=0),2===u)return ne=null,!0;1===u&&je(ht,r[0]),0!==u||ae||se||(!n&&("mouseup"===t.type?n={x:t.pageX,y:t.pageY,type:"mouse"}:t.changedTouches&&t.changedTouches[0]&&(n={x:t.changedTouches[0].pageX,y:t.changedTouches[0].pageY,type:"touch"})),Pe("touchRelease",t,n));var l=-1;if(0===u&&(X=!1,g.unbind(window,E,f),Dt(),ie?l=0:-1!=bt&&(l=ke()-bt)),bt=1===u?ke():-1,o=-1!=l&&150>l?"zoom":"swipe",ie&&2>u&&(ie=!1,1===u&&(o="zoomPointerUp"),Pe("zoomGestureEnded")),ne=null,Q||J||se||Y){if(rt(),q||(q=qt()),q.calculateSwipeSpeed("x"),Y){var s=Lt();if(s<m.verticalDragRange)f.close();else{var a=Ee.y,c=pe;ut("verticalDrag",0,1,300,g.easing.cubic.out,function(e){Ee.y=(f.currItem.initialPosition.y-a)*e+a,Se((1-c)*e+c),Le()}),Pe("onVerticalDrag",1)}return}if((te||se)&&0===u){var d=Yt(o,q);if(d)return;o="zoomPointerUp"}return se?void 0:"swipe"===o?void(!te&&C>f.currItem.fitRatio&&Gt(q)):void Xt()}},qt=function e(){var n,i,o={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function e(t){1<gt.length?(n=ke()-K+50,i=gt[gt.length-2][t]):(n=ke()-W,i=ht[t]),o.lastFlickOffset[t]=pt[t]-i,o.lastFlickDist[t]=h(o.lastFlickOffset[t]),o.lastFlickSpeed[t]=20<o.lastFlickDist[t]?o.lastFlickOffset[t]/n:0,.1>h(o.lastFlickSpeed[t])&&(o.lastFlickSpeed[t]=0),o.slowDownRatio[t]=.95,o.slowDownRatioReverse[t]=1-o.slowDownRatio[t],o.speedDecelerationRatio[t]=1},calculateOverBoundsAnimOffset:function e(t,n){o.backAnimStarted[t]||(Ee[t]>ue.min[t]?o.backAnimDestination[t]=ue.min[t]:Ee[t]<ue.max[t]&&(o.backAnimDestination[t]=ue.max[t]),o.backAnimDestination[t]!==void 0&&(o.slowDownRatio[t]=.7,o.slowDownRatioReverse[t]=1-o.slowDownRatio[t],.05>o.speedDecelerationRatioAbs[t]&&(o.lastFlickSpeed[t]=0,o.backAnimStarted[t]=!0,ut("bounceZoomPan"+t,Ee[t],o.backAnimDestination[t],n||300,g.easing.sine.out,function(e){Ee[t]=e,Le()}))))},calculateAnimOffset:function e(t){o.backAnimStarted[t]||(o.speedDecelerationRatio[t]*=o.slowDownRatio[t]+o.slowDownRatioReverse[t]-o.slowDownRatioReverse[t]*o.timeDiff/10,o.speedDecelerationRatioAbs[t]=h(o.lastFlickSpeed[t]*o.speedDecelerationRatio[t]),o.distanceOffset[t]=o.lastFlickSpeed[t]*o.speedDecelerationRatio[t]*o.timeDiff,Ee[t]+=o.distanceOffset[t])},panAnimLoop:function e(){if(tt.zoomPan&&(tt.zoomPan.raf=L(o.panAnimLoop),o.now=ke(),o.timeDiff=o.now-o.lastNow,o.lastNow=o.now,o.calculateAnimOffset("x"),o.calculateAnimOffset("y"),Le(),o.calculateOverBoundsAnimOffset("x"),o.calculateOverBoundsAnimOffset("y"),.05>o.speedDecelerationRatioAbs.x&&.05>o.speedDecelerationRatioAbs.y))return Ee.x=zn(Ee.x),Ee.y=zn(Ee.y),Le(),void it("zoomPan")}};return o},Gt=function e(t){return t.calculateSwipeSpeed("y"),ue=f.currItem.bounds,t.backAnimDestination={},t.backAnimStarted={},.05>=h(t.lastFlickSpeed.x)&&.05>=h(t.lastFlickSpeed.y)?(t.speedDecelerationRatioAbs.x=t.speedDecelerationRatioAbs.y=0,t.calculateOverBoundsAnimOffset("x"),t.calculateOverBoundsAnimOffset("y"),!0):void(ot("zoomPan"),t.lastNow=ke(),t.panAnimLoop())},Yt=function e(t,n){var i;se||(Et=y);var o;if("swipe"===t){var r=pt.x-ht.x,u=10>n.lastFlickDist.x;r>lt&&(u||20<n.lastFlickOffset.x)?o=-1:r<-lt&&(u||-20>n.lastFlickOffset.x)&&(o=1)}var l;o&&(y+=o,0>y?(y=m.loop?nn()-1:0,l=!0):y>=nn()&&(y=m.loop?0:nn()-1,l=!0),(!l||m.loop)&&(xe+=o,be-=o,i=!0));var s,a=we.x*be,c=h(a-Ct.x);return i||a>Ct.x==0<n.lastFlickSpeed.x?(s=0<h(n.lastFlickSpeed.x)?c/h(n.lastFlickSpeed.x):333,s=d(s,400),s=Nn(s,250)):s=333,Et===y&&(i=!1),se=!0,Pe("mainScrollAnimStart"),ut("mainScroll",Ct.x,a,s,g.easing.cubic.out,Ne,function(){rt(),se=!1,Et=-1,(i||Et!==y)&&f.updateCurrItem(),Pe("mainScrollAnimComplete")}),i&&f.updateCurrItem(!0),i},Vt=function e(t){return 1/re*t*w},Xt=function e(){var t=C,n=Ye(),i=Ve();C<n?t=n:C>i&&(t=i);var o,r=pe;return de&&!G&&!he&&C<n?(f.close(),!0):(de&&(o=function e(t){Se((1-r)*t+r)}),f.zoomTo(t,0,200,g.easing.cubic.out,o),!0)};Ie("Gestures",{publicMethods:{initGestures:function e(){var t=function e(t,n,i,o,r){O=t+n,T=t+i,B=t+o,P=r?t+r:""};S=Z.pointerEvent,S&&Z.touch&&(Z.touch=!1),S?navigator.pointerEnabled?t("pointer","down","move","up","cancel"):t("MSPointer","Down","Move","Up","Cancel"):Z.touch?(t("touch","start","move","end","cancel"),R=!0):t("mouse","down","move","up"),E=T+" "+B+" "+P,v=O,S&&!R&&(R=1<navigator.maxTouchPoints||1<navigator.msMaxTouchPoints),f.likelyTouchDevice=R,b[O]=Zt,b[T]=Ht,b[B]=Kt,P&&(b[P]=b[B]),Z.touch&&(v+=" mousedown",E+=" mousemove mouseup",b.mousedown=b[O],b.mousemove=b[T],b.mouseup=b[B]),R||(m.allowPanToNext=!1)}}});var $t,Jt,Qt,en,tn,nn,on,rn=function e(l,t,s,n){$t&&clearTimeout($t),en=!0,Qt=!0;var a;l.initialLayout?(a=l.initialLayout,l.initialLayout=null):a=m.getThumbBoundsFn&&m.getThumbBoundsFn(y);var c=s?m.hideAnimationDuration:m.showAnimationDuration,d=function e(){it("initialZoom"),s?(f.template.removeAttribute("style"),f.bg.removeAttribute("style")):(Se(1),t&&(t.style.display="block"),g.addClass(p,"pswp--animated-in"),Pe("initialZoom"+(s?"OutEnd":"InEnd"))),n&&n(),en=!1};if(!c||!a||void 0===a.x)return Pe("initialZoom"+(s?"Out":"In")),C=l.initialZoomLevel,je(Ee,l.initialPosition),Le(),p.style.opacity=s?0:1,Se(1),void(c?setTimeout(function(){d()},c):d());(function(){var t=o,u=!f.currItem.src||f.currItem.loadError||m.showHideOpacity;l.miniImg&&(l.miniImg.style.webkitBackfaceVisibility="hidden"),s||(C=a.w/l.w,Ee.x=a.x,Ee.y=a.y-N,f[u?"template":"bg"].style.opacity=.001,Le()),ot("initialZoom"),s&&!t&&g.removeClass(p,"pswp--animated-in"),u&&(s?g[(t?"remove":"add")+"Class"](p,"pswp--animate_opacity"):setTimeout(function(){g.addClass(p,"pswp--animate_opacity")},30)),$t=setTimeout(function(){if(Pe("initialZoom"+(s?"Out":"In")),!s)C=l.initialZoomLevel,je(Ee,l.initialPosition),Le(),Se(1),u?p.style.opacity=1:Se(1),$t=setTimeout(d,c+20);else{var n=a.w/l.w,i={x:Ee.x,y:Ee.y},o=C,r=pe,e=function e(t){1===t?(C=n,Ee.x=a.x,Ee.y=a.y-j):(C=(n-o)*t+o,Ee.x=(a.x-i.x)*t+i.x,Ee.y=(a.y-j-i.y)*t+i.y),Le(),u?p.style.opacity=1-t:Se(r-t*r)};t?ut("initialZoom",0,1,c,g.easing.cubic.out,e,d):(e(1),$t=setTimeout(d,c+20))}},s?25:90)})()},un={},ln=[],sn={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function e(){return Jt.length}},an=function e(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},cn=function e(t,n,i){var o=t.bounds;o.center.x=zn((un.x-n)/2),o.center.y=zn((un.y-i)/2)+t.vGap.top,o.max.x=n>un.x?zn(un.x-n):o.center.x,o.max.y=i>un.y?zn(un.y-i)+t.vGap.top:o.center.y,o.min.x=n>un.x?0:o.center.x,o.min.y=i>un.y?t.vGap.top:o.center.y},dn=function e(t,n,i){if(t.src&&!t.loadError){var o=!i;if(o&&(!t.vGap&&(t.vGap={top:0,bottom:0}),Pe("parseVerticalMargin",t)),un.x=n.x,un.y=n.y-t.vGap.top-t.vGap.bottom,o){var r=un.x/t.w,u=un.y/t.h;t.fitRatio=r<u?r:u;var l=m.scaleMode;"orig"===l?i=1:"fit"===l&&(i=t.fitRatio),1<i&&(i=1),t.initialZoomLevel=i,t.bounds||(t.bounds=an())}return i?(cn(t,t.w*i,t.h*i),o&&i===t.initialZoomLevel&&(t.initialPosition=t.bounds.center),t.bounds):void 0}return t.w=t.h=0,t.initialZoomLevel=t.fitRatio=1,t.bounds=an(),t.initialPosition=t.bounds.center,t.bounds},pn=function e(t,n,i,o,r,u){n.loadError||o&&(n.imageAppended=!0,mn(n,o,n===f.currItem&&De),i.appendChild(o),u&&setTimeout(function(){n&&n.loaded&&n.placeholder&&(n.placeholder.style.display="none",n.placeholder=null)},500))},hn=function e(t){t.loading=!0,t.loaded=!1;var n=t.img=g.createEl("pswp__img","img"),i=function e(){t.loading=!1,t.loaded=!0,t.loadComplete?t.loadComplete(t):t.img=null,n.onload=n.onerror=null,n=null};return n.onload=i,n.onerror=function(){t.loadError=!0,i()},n.src=t.src,n},fn=function e(t,n){if(t.src&&t.loadError&&t.container)return n&&(t.container.innerHTML=""),t.container.innerHTML=m.errorMsg.replace("%url%",t.src),!0},mn=function e(t,n,i){if(t.src){n||(n=t.container.lastChild);var o=i?t.w:zn(t.w*t.fitRatio),r=i?t.h:zn(t.h*t.fitRatio);t.placeholder&&!t.loaded&&(t.placeholder.style.width=o+"px",t.placeholder.style.height=r+"px"),n.style.width=o+"px",n.style.height=r+"px"}},gn=function e(){if(ln.length){for(var t,n=0;n<ln.length;n++){t=ln[n],t.holder.index===t.index&&pn(t.index,t.item,t.baseDiv,t.img,!1,t.clearPlaceholder)}ln=[]}};Ie("Controller",{publicMethods:{lazyLoadItem:function e(t){t=Oe(t);var n=tn(t);n&&(!n.loaded&&!n.loading||_)&&(Pe("gettingData",t,n),n.src&&hn(n))},initController:function e(){g.extend(m,sn,!0),f.items=Jt=t,tn=f.getItemAt,nn=m.getNumItemsFn,on=m.loop,3>nn()&&(m.loop=!1),Be("beforeChange",function(e){var t,n=m.preload,i=!(null!==e)||0<=e,o=d(n[0],nn()),r=d(n[1],nn());for(t=1;t<=(i?r:o);t++){f.lazyLoadItem(y+t)}for(t=1;t<=(i?o:r);t++){f.lazyLoadItem(y-t)}}),Be("initialLayout",function(){f.currItem.initialLayout=m.getThumbBoundsFn&&m.getThumbBoundsFn(y)}),Be("mainScrollAnimComplete",gn),Be("initialZoomInEnd",gn),Be("destroy",function(){for(var e,t=0;t<Jt.length;t++){e=Jt[t],e.container&&(e.container=null),e.placeholder&&(e.placeholder=null),e.img&&(e.img=null),e.preloader&&(e.preloader=null),e.loadError&&(e.loaded=e.loadError=!1)}ln=null})},getItemAt:function e(t){return!!(0<=t)&&void 0!==Jt[t]&&Jt[t]},allowProgressiveImg:function e(){return m.forceProgressiveLoading||!R||m.mouseUsed||1200<screen.width},setContent:function e(t,n){m.loop&&(n=Oe(n));var i=f.getItemAt(t.index);i&&(i.container=null);var o,r=f.getItemAt(n);if(!r)return void(t.el.innerHTML="");Pe("gettingData",n,r),t.index=n,t.item=r;var u=r.container=g.createEl("pswp__zoom-wrap");if(!r.src&&r.html&&(r.html.tagName?u.appendChild(r.html):u.innerHTML=r.html),fn(r),dn(r,ve),r.src&&!r.loadError&&!r.loaded){if(r.loadComplete=function(e){if(a){if(t&&t.index===n){if(fn(e,!0))return e.loadComplete=e.img=null,dn(e,ve),Ue(e),void(t.index===y&&f.updateCurrZoomItem());e.imageAppended?!en&&e.placeholder&&(e.placeholder.style.display="none",e.placeholder=null):Z.transform&&(se||en)?ln.push({item:e,baseDiv:u,img:e.img,index:n,holder:t,clearPlaceholder:!0}):pn(n,e,u,e.img,se||en,!0)}e.loadComplete=null,e.img=null,Pe("imageLoadComplete",n,e)}},g.features.transform){var l="pswp__img pswp__img--placeholder";l+=r.msrc?"":" pswp__img--placeholder--blank";var s=g.createEl(l,r.msrc?"img":"");r.msrc&&(s.src=r.msrc),mn(r,s),u.appendChild(s),r.placeholder=s}r.loading||hn(r),f.allowProgressiveImg()&&(!Qt&&Z.transform?ln.push({item:r,baseDiv:u,img:r.img,index:n,holder:t}):pn(n,r,u,r.img,!0,!0))}else r.src&&!r.loadError&&(o=g.createEl("pswp__img","img"),o.style.opacity=1,o.src=r.src,mn(r,o),pn(n,r,u,o,!0));Qt||n!==y?Ue(r):(le=u.style,rn(r,o||r.img)),t.el.innerHTML="",t.el.appendChild(u)},cleanSlide:function e(t){t.img&&(t.img.onload=t.img.onerror=null),t.loaded=t.loading=t.img=t.imageAppended=!1}}});var yn,En={},vn=function e(t,n,i){var o=document.createEvent("CustomEvent"),r={origEvent:t,target:t.target,releasePoint:n,pointerType:i||"touch"};o.initCustomEvent("pswpTap",!0,!0,r),t.target.dispatchEvent(o)};Ie("Tap",{publicMethods:{initTap:function e(){Be("firstTouchStart",f.onTapStart),Be("touchRelease",f.onTapRelease),Be("destroy",function(){En={},yn=null})},onTapStart:function e(t){1<t.length&&(clearTimeout(yn),yn=null)},onTapRelease:function e(t,n){if(n&&!Q&&!$&&!nt){var i=n;if(yn&&(clearTimeout(yn),yn=null,At(i,En)))return void Pe("doubleTap",i);if("mouse"===n.type)return void vn(t,n,"mouse");var o=t.target.tagName.toUpperCase();if("BUTTON"===o||g.hasClass(t.target,"pswp__single-tap"))return void vn(t,n);je(En,i),yn=setTimeout(function(){vn(t,n),yn=null},300)}}}});var bn;Ie("DesktopZoom",{publicMethods:{initDesktopZoom:function e(){M||(R?Be("mouseUsed",function(){f.setupDesktopZoom()}):f.setupDesktopZoom(!0))},setupDesktopZoom:function e(t){bn={};var n="wheel mousewheel DOMMouseScroll";Be("bindEvents",function(){g.bind(p,n,f.handleMouseWheel)}),Be("unbindEvents",function(){bn&&g.unbind(p,n,f.handleMouseWheel)}),f.mouseZoomedIn=!1;var i,o=function e(){f.mouseZoomedIn&&(g.removeClass(p,"pswp--zoomed-in"),f.mouseZoomedIn=!1),1>C?g.addClass(p,"pswp--zoom-allowed"):g.removeClass(p,"pswp--zoom-allowed"),r()},r=function e(){i&&(g.removeClass(p,"pswp--dragging"),i=!1)};Be("resize",o),Be("afterChange",o),Be("pointerDown",function(){f.mouseZoomedIn&&(i=!0,g.addClass(p,"pswp--dragging"))}),Be("pointerUp",r),t||o()},handleMouseWheel:function e(t){if(C<=f.currItem.fitRatio)return m.modal&&(!m.closeOnScroll||nt||X?t.preventDefault():k&&2<h(t.deltaY)&&(o=!0,f.close())),!0;if(t.stopPropagation(),bn.x=0,"deltaX"in t)1===t.deltaMode?(bn.x=18*t.deltaX,bn.y=18*t.deltaY):(bn.x=t.deltaX,bn.y=t.deltaY);else if("wheelDelta"in t)t.wheelDeltaX&&(bn.x=-.16*t.wheelDeltaX),bn.y=t.wheelDeltaY?-.16*t.wheelDeltaY:-.16*t.wheelDelta;else if("detail"in t)bn.y=t.detail;else return;Ge(C,!0);var n=Ee.x-bn.x,i=Ee.y-bn.y;(m.modal||n<=ue.min.x&&n>=ue.max.x&&i<=ue.min.y&&i>=ue.max.y)&&t.preventDefault(),f.panTo(n,i)},toggleDesktopZoom:function e(t){t=t||{x:ve.x/2+Ce.x,y:ve.y/2+Ce.y};var n=m.getDoubleTapZoom(!0,f.currItem),i=C===n;f.mouseZoomedIn=!i,f.zoomTo(i?f.currItem.initialZoomLevel:n,t,333),g[(i?"remove":"add")+"Class"](p,"pswp--zoomed-in")}}});var Cn,wn,xn,Fn,An,_n,Dn,In,On,Tn,Bn,Pn,kn={history:!0,galleryUID:1},Sn=function e(){return Bn.hash.substring(1)},Rn=function e(){Cn&&clearTimeout(Cn),xn&&clearTimeout(xn)},Ln=function e(){var t=Sn(),n={};if(5>t.length)return n;var i,o=t.split("&");for(i=0;i<o.length;i++){if(o[i]){var r=o[i].split("=");2>r.length||(n[r[0]]=r[1])}}if(m.galleryPIDs){var u=n.pid;for(n.pid=0,i=0;i<Jt.length;i++){if(Jt[i].pid===u){n.pid=i;break}}}else n.pid=parseInt(n.pid,10)-1;return 0>n.pid&&(n.pid=0),n},Un=function e(){if(xn&&clearTimeout(xn),nt||X)return void(xn=setTimeout(e,500));Fn?clearTimeout(wn):Fn=!0;var t=y+1,n=tn(y);n.hasOwnProperty("pid")&&(t=n.pid);var i=Dn+"&gid="+m.galleryUID+"&pid="+t;In||-1!==Bn.hash.indexOf(i)||(Tn=!0);var o=Bn.href.split("#")[0]+"#"+i;Pn?"#"+i!==window.location.hash&&history[In?"replaceState":"pushState"]("",document.title,o):In?Bn.replace(o):Bn.hash=i,In=!0,wn=setTimeout(function(){Fn=!1},60)};Ie("History",{publicMethods:{initHistory:function e(){if(g.extend(m,kn,!0),!!m.history){Bn=window.location,Tn=!1,On=!1,In=!1,Dn=Sn(),Pn="pushState"in history,-1<Dn.indexOf("gid=")&&(Dn=Dn.split("&gid=")[0],Dn=Dn.split("?gid=")[0]),Be("afterChange",f.updateURL),Be("unbindEvents",function(){g.unbind(window,"hashchange",f.onHashChange)});var t=function e(){_n=!0,On||(Tn?history.back():Dn?Bn.hash=Dn:Pn?history.pushState("",document.title,Bn.pathname+Bn.search):Bn.hash=""),Rn()};Be("unbindEvents",function(){o&&t()}),Be("destroy",function(){_n||t()}),Be("firstUpdate",function(){y=Ln().pid});var n=Dn.indexOf("pid=");-1<n&&(Dn=Dn.substring(0,n),"&"===Dn.slice(-1)&&(Dn=Dn.slice(0,-1))),setTimeout(function(){a&&g.bind(window,"hashchange",f.onHashChange)},40)}},onHashChange:function e(){return Sn()===Dn?(On=!0,void f.close()):void(!Fn&&(An=!0,f.goTo(Ln().pid),An=!1))},updateURL:function e(){Rn();An||(In?Cn=setTimeout(Un,800):Un())}}}),g.extend(f,{shout:Pe,listen:Be,viewportSize:ve,options:m,isMainScrollAnimating:function e(){return se},getZoomLevel:function e(){return C},getCurrentIndex:function e(){return y},isDragging:function e(){return X},isZooming:function e(){return ie},setScrollOffset:function e(t,n){Ce.x=t,j=Ce.y=n,Pe("updateScrollOffset",Ce)},applyZoomPan:function e(t,n,i,o){Ee.x=n,Ee.y=i,C=t,Le(o)},init:function e(){if(!(a||u)){var t;f.framework=g,f.template=p,f.bg=g.getChildByClass(p,"pswp__bg"),z=p.className,a=!0,Z=g.detectFeatures(),L=Z.raf,U=Z.caf,k=Z.transform,M=Z.oldIE,f.scrollWrap=g.getChildByClass(p,"pswp__scroll-wrap"),f.container=g.getChildByClass(f.scrollWrap,"pswp__container"),s=f.container.style,f.itemHolders=D=[{el:f.container.children[0],wrap:0,index:-1},{el:f.container.children[1],wrap:0,index:-1},{el:f.container.children[2],wrap:0,index:-1}],D[0].el.style.display=D[2].el.style.display="none",$e(),b={resize:f.updateSize,orientationchange:function e(){clearTimeout(H),H=setTimeout(function(){ve.x!==f.scrollWrap.clientWidth&&f.updateSize()},500)},scroll:et,keydown:Je,click:Qe};var n=Z.isOldIOSPhone||Z.isOldAndroid||Z.isMobileOpera;for(Z.animationName&&Z.transform&&!n||(m.showAnimationDuration=m.hideAnimationDuration=0),t=0;t<Ae.length;t++){f["init"+Ae[t]]()}if(r){var i=f.ui=new r(f,g);i.init()}Pe("firstUpdate"),y=y||m.index||0,(isNaN(y)||0>y||y>=nn())&&(y=0),f.currItem=tn(y),(Z.isOldIOSPhone||Z.isOldAndroid)&&(Fe=!1),p.setAttribute("aria-hidden","false"),m.modal&&(Fe?p.style.position="fixed":(p.style.position="absolute",p.style.top=g.getScrollY()+"px")),void 0===j&&(Pe("initialLayout"),j=N=g.getScrollY());var o="pswp--open ";for(m.mainClass&&(o+=m.mainClass+" "),m.showHideOpacity&&(o+="pswp--animate_opacity "),o+=R?"pswp--touch":"pswp--notouch",o+=Z.animationName?" pswp--css_animation":"",o+=Z.svg?" pswp--svg":"",g.addClass(p,o),f.updateSize(),c=-1,xe=null,t=0;t<l;t++){ze((t+c)*we.x,D[t].el.style)}M||g.bind(f.scrollWrap,v,f),Be("initialZoomInEnd",function(){f.setContent(D[0],y-1),f.setContent(D[2],y+1),D[0].el.style.display=D[2].el.style.display="block",m.focus&&p.focus(),Ke()}),f.setContent(D[1],y),f.updateCurrItem(),Pe("afterInit"),Fe||(A=setInterval(function(){nt||X||ie||C!==f.currItem.initialZoomLevel||f.updateSize()},1e3)),g.addClass(p,"pswp--visible")}},close:function e(){a&&(a=!1,u=!0,Pe("close"),qe(),rn(f.currItem,null,!0,f.destroy))},destroy:function e(){Pe("destroy"),$t&&clearTimeout($t),p.setAttribute("aria-hidden","true"),p.className=z,A&&clearInterval(A),g.unbind(f.scrollWrap,v,f),g.unbind(window,"scroll",f),Dt(),rt(),Te=null},panTo:function e(t,n,i){i||(t>ue.min.x?t=ue.min.x:t<ue.max.x&&(t=ue.max.x),n>ue.min.y?n=ue.min.y:n<ue.max.y&&(n=ue.max.y)),Ee.x=t,Ee.y=n,Le()},handleEvent:function e(t){t=t||window.event,b[t.type]&&b[t.type](t)},goTo:function e(t){t=Oe(t);var n=t-y;xe=n,y=t,f.currItem=tn(y),be-=n,Ne(we.x*be),rt(),se=!1,f.updateCurrItem()},next:function e(){f.goTo(y+1)},prev:function e(){f.goTo(y-1)},updateCurrZoomItem:function e(t){if(t&&Pe("beforeChange",0),D[1].el.children.length){var n=D[1].el.children[0];le=g.hasClass(n,"pswp__zoom-wrap")?n.style:null}else le=null;ue=f.currItem.bounds,w=C=f.currItem.initialZoomLevel,Ee.x=ue.center.x,Ee.y=ue.center.y,t&&Pe("afterChange")},invalidateCurrItems:function e(){_=!0;for(var t=0;t<l;t++){D[t].item&&(D[t].item.needsUpdate=!0)}},updateCurrItem:function e(t){if(0!==xe){var n,i=h(xe);if(!(t&&2>i)){f.currItem=tn(y),De=!1,Pe("beforeChange",xe),i>=l&&(c+=xe+(0<xe?-l:l),i=l);for(var o=0;o<i;o++){0<xe?(n=D.shift(),D[l-1]=n,c++,ze((c+2)*we.x,n.el.style),f.setContent(n,y-i+o+1+1)):(n=D.pop(),D.unshift(n),c--,ze(c*we.x,n.el.style),f.setContent(n,y+i-o-1-1))}if(le&&1===h(xe)){var r=tn(I);r.initialZoomLevel!==C&&(dn(r,ve),mn(r),Ue(r))}xe=0,f.updateCurrZoomItem(),I=y,Pe("afterChange")}}},updateSize:function e(t){if(!Fe&&m.modal){var n=g.getScrollY();if(j!==n&&(p.style.top=n+"px",j=n),!t&&_e.x===window.innerWidth&&_e.y===window.innerHeight)return;_e.x=window.innerWidth,_e.y=window.innerHeight,p.style.height=_e.y+"px"}if(ve.x=f.scrollWrap.clientWidth,ve.y=f.scrollWrap.clientHeight,et(),we.x=ve.x+zn(ve.x*m.spacing),we.y=ve.y,Ne(we.x*be),Pe("beforeResize"),void 0!==c){for(var i,o,r,u=0;u<l;u++){i=D[u],ze((u+c)*we.x,i.el.style),r=y+u-1,m.loop&&2<nn()&&(r=Oe(r)),o=tn(r),o&&(_||o.needsUpdate||!o.bounds)?(f.cleanSlide(o),f.setContent(i,r),1===u&&(f.currItem=o,f.updateCurrZoomItem(!0)),o.needsUpdate=!1):-1===i.index&&0<=r&&f.setContent(i,r),o&&o.container&&(dn(o,ve),mn(o),Ue(o))}_=!1}w=C=f.currItem.initialZoomLevel,ue=f.currItem.bounds,ue&&(Ee.x=ue.center.x,Ee.y=ue.center.y,Le(!0)),Pe("resize")},zoomTo:function e(n,t,i,o,r){t&&(w=C,wt.x=h(t.x)-Ee.x,wt.y=h(t.y)-Ee.y,je(ye,Ee));var u=Ge(n,!1),l={};Xe("x",u,l,n),Xe("y",u,l,n);var s=C,a={x:Ee.x,y:Ee.y};Ze(l);var c=function e(t){1===t?(C=n,Ee.x=l.x,Ee.y=l.y):(C=(n-s)*t+s,Ee.x=(l.x-a.x)*t+a.x,Ee.y=(l.y-a.y)*t+a.y),r&&r(t),Le(1===t)};i?ut("customZoomTo",0,1,i,o||g.easing.sine.inOut,c):c(1)}})}})?i.call(t,n,t,e):i)||(e.exports=o)},function(e,t,n){var i,o;void 0===(o="function"==typeof(i=function(){"use strict";return function(i,s){var t,l,r,u,n,o,a,c,d,p,h,f,m,g,y,E,v,b,C=this,e=!1,w=!0,x=!0,F={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function e(t,n){return t.title?(n.children[0].innerHTML=t.title,!0):(n.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function e(){return i.currItem.src||""},getPageURLForShare:function e(){return window.location.href},getTextForShare:function e(){return i.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},A=function e(t){if(E)return!0;t=t||window.event,y.timeToIdle&&y.mouseUsed&&!d&&R();for(var n,i,o=t.target||t.srcElement,r=o.getAttribute("class")||"",u=0;u<H.length;u++){n=H[u],n.onTap&&-1<r.indexOf("pswp__"+n.name)&&(n.onTap(),i=!0)}if(i){t.stopPropagation&&t.stopPropagation(),E=!0;var l=s.features.isOldAndroid?600:30;setTimeout(function(){E=!1},l)}},_=function e(){return!i.likelyTouchDevice||y.mouseUsed||screen.width>y.fitControlsWidth},D=function e(t,n,i){s[(i?"add":"remove")+"Class"](t,"pswp__"+n)},I=function e(){var t=1===y.getNumItemsFn();t!==g&&(D(l,"ui--one-slide",t),g=t)},O=function e(){D(a,"share-modal--hidden",x)},T=function e(){return x=!x,x?(s.removeClass(a,"pswp__share-modal--fade-in"),setTimeout(function(){x&&O()},300)):(O(),setTimeout(function(){x||s.addClass(a,"pswp__share-modal--fade-in")},30)),x||P(),!1},B=function e(t){t=t||window.event;var n=t.target||t.srcElement;return(i.shout("shareLinkClick",t,n),!!n.href)&&(!!n.hasAttribute("download")||(window.open(n.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?zn(screen.width/2-275):100)),x||T(),!1))},P=function e(){for(var t,n,i,o,r,u="",l=0;l<y.shareButtons.length;l++){t=y.shareButtons[l],i=y.getImageURLForShare(t),o=y.getPageURLForShare(t),r=y.getTextForShare(t),n=t.url.replace("{{url}}",encodeURIComponent(o)).replace("{{image_url}}",encodeURIComponent(i)).replace("{{raw_image_url}}",i).replace("{{text}}",encodeURIComponent(r)),u+='<a href="'+n+'" target="_blank" class="pswp__share--'+t.id+'"'+(t.download?"download":"")+">"+t.label+"</a>",y.parseShareButtonOut&&(u=y.parseShareButtonOut(t,u))}a.children[0].innerHTML=u,a.children[0].onclick=B},k=function e(t){for(var n=0;n<y.closeElClasses.length;n++){if(s.hasClass(t,"pswp__"+y.closeElClasses[n]))return!0}},S=0,R=function e(){clearTimeout(b),S=0,d&&C.setIdle(!1)},L=function e(t){t=t?t:window.event;var n=t.relatedTarget||t.toElement;n&&"HTML"!==n.nodeName||(clearTimeout(b),b=setTimeout(function(){C.setIdle(!0)},y.timeToIdleOutside))},U=function e(){y.fullscreenEl&&!s.features.isOldAndroid&&(!t&&(t=C.getFullscreenAPI()),t?(s.bind(document,t.eventK,C.updateFullscreen),C.updateFullscreen(),s.addClass(i.template,"pswp--supports-fs")):s.removeClass(i.template,"pswp--supports-fs"))},z=function e(){y.preloaderEl&&(N(!0),p("beforeChange",function(){clearTimeout(m),m=setTimeout(function(){i.currItem&&i.currItem.loading?(!i.allowProgressiveImg()||i.currItem.img&&!i.currItem.img.naturalWidth)&&N(!1):N(!0)},y.loadingIndicatorDelay)}),p("imageLoadComplete",function(e,t){i.currItem===t&&N(!0)}))},N=function e(t){f!==t&&(D(h,"preloader--active",!t),f=t)},M=function e(t){var n=t.vGap;if(_()){var i=y.barsSize;if(!(y.captionEl&&"auto"===i.bottom))n.bottom="auto"===i.bottom?0:i.bottom;else if(u||(u=s.createEl("pswp__caption pswp__caption--fake"),u.appendChild(s.createEl("pswp__caption__center")),l.insertBefore(u,r),s.addClass(l,"pswp__ui--fit")),y.addCaptionHTMLFn(t,u,!0)){var o=u.clientHeight;n.bottom=parseInt(o,10)||44}else n.bottom=i.top;n.top=i.top}else n.top=n.bottom=0},j=function e(){y.timeToIdle&&p("mouseUsed",function(){s.bind(document,"mousemove",R),s.bind(document,"mouseout",L),v=setInterval(function(){S++,2==S&&C.setIdle(!0)},y.timeToIdle/2)})},Z=function e(){p("onVerticalDrag",function(e){w&&.95>e?C.hideControls():!w&&.95<=e&&C.showControls()});var t;p("onPinchClose",function(e){w&&.9>e?(C.hideControls(),t=!0):t&&!w&&.9<e&&C.showControls()}),p("zoomGestureEnded",function(){t=!1,t&&!w&&C.showControls()})},H=[{name:"caption",option:"captionEl",onInit:function e(t){r=t}},{name:"share-modal",option:"shareEl",onInit:function e(t){a=t},onTap:function e(){T()}},{name:"button--share",option:"shareEl",onInit:function e(t){o=t},onTap:function e(){T()}},{name:"button--zoom",option:"zoomEl",onTap:i.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function e(t){n=t}},{name:"button--close",option:"closeEl",onTap:i.close},{name:"button--arrow--left",option:"arrowEl",onTap:i.prev},{name:"button--arrow--right",option:"arrowEl",onTap:i.next},{name:"button--fs",option:"fullscreenEl",onTap:function e(){t.isFullscreen()?t.exit():t.enter()}},{name:"preloader",option:"preloaderEl",onInit:function e(t){h=t}}],W=function e(){var o,r,u,t=function e(t){if(t)for(var n=t.length,i=0;i<n;i++){o=t[i],r=o.className;for(var e=0;e<H.length;e++){u=H[e],-1<r.indexOf("pswp__"+u.name)&&(y[u.option]?(s.removeClass(o,"pswp__element--disabled"),u.onInit&&u.onInit(o)):s.addClass(o,"pswp__element--disabled"))}}};t(l.children);var n=s.getChildByClass(l,"pswp__top-bar");n&&t(n.children)};C.init=function(){s.extend(i.options,F,!0),y=i.options,l=s.getChildByClass(i.scrollWrap,"pswp__ui"),p=i.listen,Z(),p("beforeChange",C.update),p("doubleTap",function(e){var t=i.currItem.initialZoomLevel;i.getZoomLevel()===t?i.zoomTo(y.getDoubleTapZoom(!1,i.currItem),e,333):i.zoomTo(t,e,333)}),p("preventDragEvent",function(e,t,n){var i=e.target||e.srcElement;i&&i.getAttribute("class")&&-1<e.type.indexOf("mouse")&&(0<i.getAttribute("class").indexOf("__caption")||/(SMALL|STRONG|EM)/i.test(i.tagName))&&(n.prevent=!1)}),p("bindEvents",function(){s.bind(l,"pswpTap click",A),s.bind(i.scrollWrap,"pswpTap",C.onGlobalTap),i.likelyTouchDevice||s.bind(i.scrollWrap,"mouseover",C.onMouseOver)}),p("unbindEvents",function(){x||T(),v&&clearInterval(v),s.unbind(document,"mouseout",L),s.unbind(document,"mousemove",R),s.unbind(l,"pswpTap click",A),s.unbind(i.scrollWrap,"pswpTap",C.onGlobalTap),s.unbind(i.scrollWrap,"mouseover",C.onMouseOver),t&&(s.unbind(document,t.eventK,C.updateFullscreen),t.isFullscreen()&&(y.hideAnimationDuration=0,t.exit()),t=null)}),p("destroy",function(){y.captionEl&&(u&&l.removeChild(u),s.removeClass(r,"pswp__caption--empty")),a&&(a.children[0].onclick=null),s.removeClass(l,"pswp__ui--over-close"),s.addClass(l,"pswp__ui--hidden"),C.setIdle(!1)}),y.showAnimationDuration||s.removeClass(l,"pswp__ui--hidden"),p("initialZoomIn",function(){y.showAnimationDuration&&s.removeClass(l,"pswp__ui--hidden")}),p("initialZoomOut",function(){s.addClass(l,"pswp__ui--hidden")}),p("parseVerticalMargin",M),W(),y.shareEl&&o&&a&&(x=!0),I(),j(),U(),z()},C.setIdle=function(e){d=e,D(l,"ui--idle",e)},C.update=function(){w&&i.currItem?(C.updateIndexIndicator(),y.captionEl&&(y.addCaptionHTMLFn(i.currItem,r),D(r,"caption--empty",!i.currItem.title)),e=!0):e=!1,x||T(),I()},C.updateFullscreen=function(e){e&&setTimeout(function(){i.setScrollOffset(0,s.getScrollY())},50),s[(t.isFullscreen()?"add":"remove")+"Class"](i.template,"pswp--fs")},C.updateIndexIndicator=function(){y.counterEl&&(n.innerHTML=i.getCurrentIndex()+1+y.indexIndicatorSep+y.getNumItemsFn())},C.onGlobalTap=function(e){e=e||window.event;var t=e.target||e.srcElement;if(!E)if(e.detail&&"mouse"===e.detail.pointerType){if(k(t))return void i.close();s.hasClass(t,"pswp__img")&&(1===i.getZoomLevel()&&i.getZoomLevel()<=i.currItem.fitRatio?y.clickToCloseNonZoomable&&i.close():i.toggleDesktopZoom(e.detail.releasePoint))}else if(y.tapToToggleControls&&(w?C.hideControls():C.showControls()),y.tapToClose&&(s.hasClass(t,"pswp__img")||k(t)))return void i.close()},C.onMouseOver=function(e){e=e||window.event;var t=e.target||e.srcElement;D(l,"ui--over-close",k(t))},C.hideControls=function(){s.addClass(l,"pswp__ui--hidden"),w=!1},C.showControls=function(){w=!0,e||C.update(),s.removeClass(l,"pswp__ui--hidden")},C.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},C.getFullscreenAPI=function(){var e,t=document.documentElement,n="fullscreenchange";return t.requestFullscreen?e={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:n}:t.mozRequestFullScreen?e={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+n}:t.webkitRequestFullscreen?e={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+n}:t.msRequestFullscreen&&(e={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),e&&(e.enter=function(){return c=y.closeOnScroll,y.closeOnScroll=!1,"webkitRequestFullscreen"===this.enterK?void i.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT):i.template[this.enterK]()},e.exit=function(){return y.closeOnScroll=c,document[this.exitK]()},e.isFullscreen=function(){return document[this.elementK]}),e}}})?i.call(t,n,t,e):i)||(e.exports=o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=(o.prototype.addFilter=function(e){this.filters.push(e)},o.prototype.refresh=function(){this.filters.forEach(function(e){e.render()})},o.prototype.render=function(){var e=document.createElement("div");r.Utility.addClass(e,"natural-gallery-images sectionContainer"),e.appendChild(r.Utility.getIcon("icon-pict"));var t=document.createElement("div");r.Utility.addClass(t,"sectionName"),t.textContent=this.gallery.options.labelImages,e.appendChild(t);var n=document.createElement("span");e.appendChild(n),r.Utility.addClass(n,"natural-gallery-visible");var i=document.createElement("span");i.textContent=" / ",e.appendChild(i);var o=document.createElement("span");return r.Utility.addClass(o,"natural-gallery-total"),e.appendChild(o),this.element=document.createElement("div"),this.filters.forEach(function(e){this.element.appendChild(e.render())},this),r.Utility.addClass(this.element,"natural-gallery-header"),this.element.appendChild(e),this.element},o.prototype.isFiltered=function(){return null!==this.collection},o.prototype.filter=function(){var t=null;this.filters.forEach(function(e){e.isActive()&&(t=null==t?e.collection:r.Utility.intersectionBy(t,e.collection,"id"))}),this.collection=t,this.gallery.refresh()},Object.defineProperty(o.prototype,"collection",{get:function(){return this._collection},set:function(e){this._collection=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"element",{get:function(){return this._element},set:function(e){this._element=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"gallery",{get:function(){return this._gallery},set:function(e){this._gallery=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"filters",{get:function(){return this._filters},set:function(e){this._filters=e},enumerable:!0,configurable:!0}),o);function o(e){this._collection=null,this._filters=[],this.gallery=e}t.Header=i},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r,u=n(0),l=n(1),s=(r=l.AbstractFilter,o(a,r),a.prototype.render=function(){var e=document.createElement("div");u.Utility.addClass(e,"natural-gallery-searchTerm sectionContainer"),e.appendChild(u.Utility.getIcon("icon-search")),e.appendChild(this.getInput());var t=document.createElement("label");u.Utility.addClass(t,"sectionName"),t.textContent=this.header.gallery.options.labelSearch,e.appendChild(t);var n=document.createElement("span");return u.Utility.addClass(n,"bar"),e.appendChild(n),e},a.prototype.getInput=function(){var t=this,e=document.createElement("input");return e.setAttribute("required",""),e.addEventListener("keyup",function(e){27===e.keyCode&&(this.value=""),t.filter(this.value)}),e},a.prototype.filter=function(e){this.collection=null;var t=u.Utility.removeDiacritics(e).toLowerCase();0<t.length&&(this.collection=[],this.header.gallery.getOriginalCollection().forEach(function(e){-1!==u.Utility.removeDiacritics(e.title+" "+(e.description?e.description:"")).toLowerCase().search(t)&&this.collection.push(e)},this)),this.header.filter()},a);function a(){return null!==r&&r.apply(this,arguments)||this}t.SearchFilter=s},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r,u=n(1),l=n(12),s=n(0),a=(r=u.AbstractFilter,o(c,r),Object.defineProperty(c.prototype,"element",{get:function(){return this._element},set:function(e){this._element=e},enumerable:!0,configurable:!0}),c.prototype.render=function(){if(this.prepare(),this.element)for(var e=this.element.getElementsByTagName("label"),t=e.length-1;0<t;t--)this.element.removeChild(e.item(t));else{this.element=document.createElement("div"),s.Utility.addClass(this.element,"natural-gallery-categories sectionContainer");var n=document.createElement("div");s.Utility.addClass(n,"sectionName"),n.textContent=this.header.gallery.options.labelCategories,this.element.appendChild(n)}var i=this.element.getElementsByTagName("label")[0];return i&&i.parentNode.removeChild(i),this.categories.forEach(function(e){this.element.appendChild(e.render())},this),this.element},c.prototype.prepare=function(){var t=[];this.header.gallery.categories.forEach(function(e){t.push(new l.Category(e.id,e.title,this))},this),this.none=new l.Category(-1,this.header.gallery.options.labelNone,this),this.others=new l.Category(-2,this.header.gallery.options.labelOthers,this),this.header.gallery.options.showNone&&t.length&&t.push(this.none),this.header.gallery.options.showOthers&&t.length&&t.push(this.others);var n=[];this.header.gallery.getOriginalCollection().forEach(function(e){(!e.categories||e.categories&&0===e.categories.length&&this.header.gallery.options.showNone)&&(e.categories=[this.none]),t.length&&s.Utility.differenceBy(e.categories,t,"id").length===e.categories.length&&this.header.gallery.options.showOthers&&(e.categories=[this.others]),e.categories.forEach(function(e){n.push(new l.Category(e.id,e.title,this))},this)},this),t=s.Utility.uniqBy(t,"id"),n=s.Utility.uniqBy(n,"id"),this.categories=t.length?s.Utility.intersectionBy(t,n,"id"):n},c.prototype.filter=function(){var n=this.categories.filter(function(e){return e.isActive});if(n.length===this.categories.length)this.collection=null;else if(0===n.length)this.collection=[];else{var i=[];this.header.gallery.getOriginalCollection().forEach(function(e){!e.categories||e.categories&&0===e.categories.length?this.none&&i.push(e):e.categories.some(function(t){if(n.some(function(e){return t.id===e.id}))return i.push(e),!0})},this),this.collection=i}this.header.filter()},Object.defineProperty(c.prototype,"categories",{get:function(){return this._categories},set:function(e){this._categories=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"others",{get:function(){return this._others},set:function(e){this._others=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"none",{get:function(){return this._none},set:function(e){this._none=e},enumerable:!0,configurable:!0}),c);function c(e){var t=r.call(this,e)||this;return t.header=e,t._categories=[],t}t.CategoryFilter=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=(o.prototype.render=function(){var e=this;this.element=document.createElement("label");var t=document.createElement("input");t.setAttribute("type","checkbox"),t.setAttribute("checked","checked"),t.addEventListener("change",function(){e.isActive=!e.isActive,e.filter.filter()}),this.element.appendChild(t);var n=document.createElement("span");n.textContent=this.title;var i=document.createElement("span");r.Utility.addClass(i,"label"),i.appendChild(r.Utility.getIcon("icon-category")),i.appendChild(n),this.element.appendChild(i);var o=document.createElement("span");return r.Utility.addClass(o,"bar"),this.element.appendChild(o),this.element},Object.defineProperty(o.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"title",{get:function(){return this._title},set:function(e){this._title=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isActive",{get:function(){return this._isActive},set:function(e){this._isActive=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"element",{get:function(){return this._element},set:function(e){this._element=e},enumerable:!0,configurable:!0}),o);function o(e,t,n){this.filter=n,this._isActive=!0,this.id=e,this.title=t}t.Category=i},function(e,t){"use strict";var n,a;Object.defineProperty(t,"__esModule",{value:!0}),n=t.Organizer||(t.Organizer={}),a=Math.ceil,n.organize=function(e){"natural"===e.options.format?this.organizeNatural(e.collection,e.bodyWidth,e.options.rowHeight,e.options.margin):"square"===e.options.format&&e.options.imagesPerRow?this.organizeSquareByImagesPerRow(e.collection,e.bodyWidth,e.options.imagesPerRow,e.options.margin):"square"===e.options.format&&e.options.rowHeight&&this.organizeSquareByRowHeight(e.collection,e.bodyWidth,e.options.rowHeight,e.options.margin),e.style()},n.simulatePagination=function(e){var t=e.options.margin?e.options.margin:0,n=a(e.options.rowHeight*e.defaultImageRatio+t),i=(e.bodyWidth+t)/(n+t);return a(i)},n.organizeSquareByRowHeight=function(e,t,n,i){for(var o,r=a((t+(i=i||0))/(n+i)),u=zn((t+i-r*i)/r),l=t-r*u-(r-1)*i,s=0;s<e.length;s++)(o=e[s]).last=s%r==r-1,o.row=p(s/r),o.width=p(u),o.height=p(u),o.last&&(o.width=p(u+l))},n.organizeSquareByImagesPerRow=function(e,t,n,i){for(var o,r=(t-((n=n||4)-1)*(i=i||0))/n,u=0;u<e.length;u++)(o=e[u]).width=p(r),o.height=p(r),o.last=u%n==n-1,o.row=p(u/n)},n.organizeNatural=function(e,t,n,i,o){void 0===o&&(o=null),o=o||0,i=i||0,n=n||300;for(var r=1;r<=e.length;r++){var u=e.slice(0,r);if(t<=this.getRowWidth(n,i,u)){this.computeSizes(u,t,i,o),this.organizeNatural(e.slice(r),t,n,i,o+1);break}if(r===e.length){this.computeSizes(u,null,i,o,n);break}}},n.computeSizes=function(e,t,n,i,o){void 0===o&&(o=null);for(var r=t?this.getRowHeight(t,n,e):o,u=this.getRowWidth(r,n,e),l=t?this.apportionExcess(e,t,u):0,s=0,a=0;a<e.length;a++){var c=e[a],d=this.getImageRatio(c)*r-l;s+=d-p(d),d=p(d),(1<=s||a===e.length-1&&1===zn(s))&&(d++,s--),c.width=d,c.height=p(r),c.row=i,c.last=a===e.length-1}},n.getRowWidth=function(e,t,n){return t*(n.length-1)+this.getRatios(n)*e},n.getRowHeight=function(e,t,n){return e/this.getRatios(n)+t*(n.length-1)},n.getRatios=function(e){for(var t=0,n=0;n<e.length;n++)t+=this.getImageRatio(e[n]);return t},n.getImageRatio=function(e){return e.tWidth/e.tHeight},n.apportionExcess=function(e,t,n){return(n-t)/e.length}}],o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=2);function o(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}});